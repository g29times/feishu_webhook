# 📝 划线取词助手 Chrome 插件

一个简单实用的 Chrome 浏览器插件，帮助你快速收集网页上的灵感和想法，并自动发送到飞书 Webhook。

## ✨ 功能特点

- 🖱️ **划线取词**：在任意网页上选中文字
- 🎯 **一键发送**：点击浮动按钮即可发送到飞书
- 📝 **网页便签**：为每个网页添加独立的笔记，支持持久化存储
- 🔗 **URL绑定**：笔记与网页URL绑定，切换标签页自动切换笔记
- ⚙️ **自定义配置**：支持在插件面板中修改 Webhook 地址
- 🎨 **美观界面**：紫色渐变圆形按钮，现代化设计
- ⚡ **实时反馈**：发送成功/失败即时通知
- 🌐 **全局支持**：在所有网页上都可以使用

## 📦 安装方法

### 方式一：开发者模式安装（推荐）

1. 打开 Chrome 浏览器，访问 `chrome://extensions/`
2. 开启右上角的「开发者模式」
3. 点击「加载已解压的扩展程序」
4. 选择本项目文件夹
5. 安装完成！

### 方式二：打包安装

1. 在 `chrome://extensions/` 页面点击「打包扩展程序」
2. 选择本项目文件夹
3. 生成 `.crx` 文件后拖入浏览器安装

## 🚀 使用方法

### 功能一：划线取词发送

1. **选中文字**：在任意网页上用鼠标选中你想要收集的文字
2. **点击按钮**：选中后会出现一个紫色的圆形浮动按钮
3. **自动发送**：点击按钮，选中的文字会自动发送到飞书 Webhook
4. **查看反馈**：右上角会显示发送成功或失败的提示

### 功能二：网页便签

1. **打开侧边栏**：点击页面右侧的笔记按钮，从右侧滑出笔记面板
2. **添加笔记**：在输入框中输入内容，点击"添加笔记"或按 `Ctrl+Enter`
3. **管理笔记**：每条笔记可以单独发送到飞书或删除
4. **自动保存**：笔记与当前网页URL绑定，刷新页面或下次访问时自动加载
5. **切换页面**：切换到不同的网页，笔记内容会自动切换

## 🔧 配置说明

### Webhook 地址与请求体配置

**方式一：通过插件面板配置（推荐）**

1. 点击浏览器工具栏中的插件图标
2. 在弹出的面板中找到"Webhook配置"卡片
3. 输入你的飞书 Webhook 地址
4. **自定义请求体**：在"请求体模版"中输入 JSON 格式的模板，支持以下占位符：
   - `{{text}}`：被选中的文本或笔记内容
   - `{{url}}`：当前页面的链接

   例如，如果你使用的是飞书自定义机器人（Custom Bot），可以配置为：
   ```json
   {
     "msg_type": "text",
     "content": {
       "text": "收到新灵感：{{text}}\n来源：{{url}}"
     }
   }
   ```
5. 点击"💾 保存配置"按钮
6. 配置会自动保存到浏览器本地存储

**方式二：使用默认配置**

如果不配置，插件会使用默认的飞书捷径触发器格式：

- URL: `https://www.feishu.cn/flow/api/trigger-webhook/...`
- Body: `{"idea": "{{text}}", "url": "{{url}}"}`


## 📁 项目结构

```
windsurf-project/
├── manifest.json       # 插件配置文件
├── content.js          # 核心功能脚本
├── content.css         # 样式文件
├── popup.html          # 弹出窗口页面
├── popup.js            # 弹出窗口脚本
├── README.md           # 说明文档
└── images/             # 图标文件夹
    ├── icon16.png      # 16x16 图标
    ├── icon48.png      # 48x48 图标
    └── icon128.png     # 128x128 图标
```

## 🎨 图标准备

你需要准备三个尺寸的图标文件，放在 `images` 文件夹中：

- `icon16.png` - 16x16 像素
- `icon48.png` - 48x48 像素
- `icon128.png` - 128x128 像素

**临时方案**：如果暂时没有图标，可以先创建 `images` 文件夹，插件功能不受影响。

## 🔒 权限说明

插件需要以下权限：

- `activeTab`：访问当前活动标签页
- `storage`：存储插件配置
- `https://www.feishu.cn/*`：向飞书发送请求

## 🛠️ 技术栈

- **Manifest V3**：最新的 Chrome 扩展规范
- **原生 JavaScript**：无依赖，轻量高效
- **CSS3 动画**：流畅的交互体验
- **Fetch API**：现代化的网络请求

## 📝 开发说明

### 修改 Webhook 地址

编辑 `content.js` 第 7 行：

```javascript
const WEBHOOK_URL = '你的webhook地址';
```

### 自定义样式

编辑 `content.css` 文件，可以修改：

- 按钮颜色（渐变色）
- 按钮大小
- 动画效果
- 通知样式

### 调试方法

1. 在 `chrome://extensions/` 页面找到插件
2. 点击「背景页」或「检查视图」
3. 打开开发者工具查看日志

## 🐛 常见问题

### Q: 按钮不显示？
A: 请检查是否成功选中了文字，并且文字长度大于 0。

### Q: 发送失败？
A: 请检查 Webhook 地址是否正确，以及网络连接是否正常。

### Q: 图标不显示？
A: 请确保 `images` 文件夹中有对应尺寸的图标文件。

### Q: 在某些网页上不工作？
A: 某些特殊页面（如 Chrome 商店、设置页）出于安全考虑无法使用插件。

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📮 联系方式

如有问题或建议，欢迎反馈。

---

**享受高效的灵感收集体验！** ✨
